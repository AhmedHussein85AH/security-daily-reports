import{r as p,a as X,R as ee}from"./vendor-b1791c80.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const b of u.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&n(b)}).observe(document,{childList:!0,subtree:!0});function o(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(c){if(c.ep)return;c.ep=!0;const u=o(c);fetch(c.href,u)}})();var Q={exports:{}},z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=p,se=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),re=Object.prototype.hasOwnProperty,le=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ie={key:!0,ref:!0,__self:!0,__source:!0};function Z(l,a,o){var n,c={},u=null,b=null;o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),a.ref!==void 0&&(b=a.ref);for(n in a)re.call(a,n)&&!ie.hasOwnProperty(n)&&(c[n]=a[n]);if(l&&l.defaultProps)for(n in a=l.defaultProps,a)c[n]===void 0&&(c[n]=a[n]);return{$$typeof:se,type:l,key:u,ref:b,props:c,_owner:le.current}}z.Fragment=ae;z.jsx=Z;z.jsxs=Z;Q.exports=z;var e=Q.exports,G={},J=X;G.createRoot=J.createRoot,G.hydrateRoot=J.hydrateRoot;const oe=({onSubmit:l})=>{const[a,o]=p.useState({reportNumber:1,crrNumber:"",dateTime:"",subject:"",category:"",location:"",description:"",responsibleDepartment:"",actionTaken:"",responseDate:"",lcrr:"",priority:"low",cmdOption:"cmd"}),[n,c]=p.useState([{id:"1",description:"",type:"violation"}]),u=["CMD","FMD","OPS","IT","Construction","Safety","Markting","Development","Hospitality","Security","WareHouse","Call Centre","Landscape","Retail & Leasing"],[b,f]=p.useState([]),[v,k]=p.useState([]),[y,C]=p.useState(""),[g,D]=p.useState(!1),S=p.useRef(null),j=["Installation of satellite","Asset Damages/Misuse of Public areas (public toilets- swimming pool - Using the elevator to move furniture or construction equipment - sports area- Lounges)","Misuse of Public Areas-Building door security lapse","Unpermitted Photoshoots, Advertising, Shows in Public areas","Dumping garbage or landscape waste out of designated areas","Dumping construction waste in garbage rooms or around the unit","Underage driving (Driving for persons under the legal age) - Cars","Noise and disturbance from Cars (loud music, car engines)","Racing/Unlicensed Cars/ Advertising Cars for Sale or Rent with Stickers in Public Places","Roads/Gate Blocking (by Cars-Golf Carts-Contractor's cars)","Charge golf carts in non- designated areas / Disconnecting the charger from the neighbor's golf cart without authorization","Hit and run car accident","Occupying multiple parking slots using one vehicle","Parking cars in specified charging slots (Golf carts / Electric vehicles)","Unpermitted events inside the unit without the CM notification /Noise &loud music","Pet Dog /Pet Dog License / dogs in retails and kids' areas/ underage dogs walkers / unregistered walkers' trainers","Selling QR codes","Identity Manipulation","Unauthorized access","Renting Unit without CM notification","Verbal or Physical Assault Against Individuals or Residential Community Staff and Officials","Unauthorized internal alterations/modifications","Fight Picking / Fire Initiation /Fireworks","Landscape Violation (Types -Lengths -Irrigation systems)","Entering workers without a work permit from the CM / Working at unauthorized times and days/ Unpermitted material entry","Drinking Alcohol in Public Areas","Unpermitted Fishing","Beach/ Pool / lagoons rules / swimming wear rules Violation","Gate barrier","Misuse or damages of Sports facilities","Swimming pool furniture","Clubhouse furniture","Building lobbies furniture","Community center/clubhouse unauthorized gatherings,Excessive water car wash","Driving beach buggies,UTV cars are restricted regardless driver's license","Events loud noises-Access Beaches with unpermitted loudspeakers","Pets Violations-Unmuzzled Dog & Unleashed Dog","Pets Violations-Pets Noise","Pets Violations-Unmuzzled Pet Dog","Pets Violations-Underage Dogs Walkers","Pets Violations-Stray Animals","Pets Violations-Unleashed Pet Dog","Pets Violations-Prohibited Dog Breed","Misuse of Public Areas-Car wash","Misuse of Public Areas-Wasting water","Misuse of Public Areas-Landscape waste","Breached your Company Name Community Rules","Misuse of Public Areas-Elevator misuse","Misuse of Public Areas-Abandoned items in public areas","Driving in the wrong direction / Unsafe driving","Underage driving (Driving for persons under the legal age) -(Golf Carts-Glide-Motor cycles)","Obstructing traffic and roads blockage with the use of any moving vehicle or in person","Jet Ski Violations"].filter(s=>s.toLowerCase().includes(y.toLowerCase())),m=s=>{const{name:d,value:w}=s.target;o(A=>({...A,[d]:w}))},x=s=>{C(s.target.value),D(!0)},N=s=>{o(d=>({...d,subject:s})),C(""),D(!1)};p.useEffect(()=>{const s=d=>{S.current&&!S.current.contains(d.target)&&D(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const L=s=>{f(d=>d.includes(s)?d.filter(P=>P!==s):[...d,s])};p.useEffect(()=>{const s=b.join(", ");o(d=>({...d,responsibleDepartment:s,actionTaken:s?`The Report has been sent to ${s} to be informed.`:""}))},[b]);const B=(s,d,w)=>{c(A=>A.map(P=>P.id===s?{...P,[d]:w}:P))},_=()=>{const s=(n.length+1).toString();c(d=>[...d,{id:s,description:"",type:"violation"}])},F=s=>{c(d=>d.filter(w=>w.id!==s))},H=s=>{s.target.files&&k(d=>[...d,...Array.from(s.target.files)])},V=s=>{const d={id:Date.now().toString(),...a,responsibleDepartment:b.join(", "),responsibility:n,attachments:v,createdAt:new Date,priority:s};l(d),o({reportNumber:a.reportNumber+1,crrNumber:"",dateTime:"",subject:"",category:"",location:"",description:"",responsibleDepartment:"",actionTaken:"",responseDate:"",lcrr:"",priority:"low",cmdOption:"cmd"}),c([{id:"1",description:"",type:"violation"}]),k([]),f([])};return e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"card-security animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Security Incident Report"}),e.jsx("p",{className:"text-slate-600",children:"Daily Security Incidents Reports"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{type:"button",onClick:()=>o(s=>({...s,priority:"low"})),className:`btn-priority-low ${a.priority==="low"?"ring-2 ring-green-500":""}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save as Low Priority"]}),e.jsxs("button",{type:"button",onClick:()=>o(s=>({...s,priority:"high"})),className:`btn-priority-high ${a.priority==="high"?"ring-2 ring-red-500":""}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Save as High Priority"]})]})]}),e.jsxs("form",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center hover:border-slate-400 transition-colors",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"text-slate-600 mb-2",children:"Upload images or documents"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:H,className:"hidden",id:"attachments"}),e.jsx("label",{htmlFor:"attachments",className:"btn-secondary cursor-pointer inline-block",children:"Choose Files"}),v.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:v.map((s,d)=>e.jsx("div",{className:"text-sm text-slate-600 bg-slate-100 rounded px-2 py-1",children:s.name},d))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-slate-200 rounded-lg h-48 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-slate-400 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h8v8H8V8z"})}),e.jsx("p",{className:"text-slate-500",children:"Incident Image"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Report Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Report Number"}),e.jsx("input",{type:"number",name:"reportNumber",value:a.reportNumber,onChange:m,className:"input-security","aria-label":"Report Number",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CRR Number"}),e.jsx("input",{type:"text",name:"crrNumber",value:a.crrNumber,onChange:m,className:"input-security",placeholder:"Enter CRR Number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date & Time"}),e.jsx("input",{type:"datetime-local",name:"dateTime",value:a.dateTime,onChange:m,className:"input-security","aria-label":"Date and Time"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subject / Category"}),e.jsxs("div",{className:"relative",ref:S,children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:y||a.subject,onChange:x,onFocus:()=>D(!0),className:"input-security w-full",placeholder:"Type to search categories..."}),g&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:j.length>0?j.map((s,d)=>e.jsxs("div",{onClick:()=>N(s),className:"px-4 py-2 hover:bg-slate-100 cursor-pointer text-sm border-b border-slate-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-slate-800",children:s.split("(")[0].trim()}),s.includes("(")&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:s.split("(")[1].replace(")","")})]},d)):e.jsx("div",{className:"px-4 py-2 text-slate-500 text-sm",children:"No categories found"})})]}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Shortcut"})]}),a.subject&&e.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Selected:"}),e.jsx("div",{className:"text-sm text-slate-600",children:a.subject})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:a.location,onChange:m,className:"input-security",placeholder:"Enter incident location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Responsible Departments (select multiple)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(s=>{const d=b.includes(s);return e.jsxs("label",{className:`cursor-pointer inline-flex items-center gap-2 px-3 py-2 rounded-lg border-2 text-sm transition ${d?"border-purple-600 bg-purple-50 text-purple-700":"border-slate-300 text-slate-700 hover:border-purple-400"}`,children:[e.jsx("input",{type:"checkbox","aria-label":`Select ${s}`,className:"w-4 h-4",checked:d,onChange:()=>L(s)}),e.jsx("span",{children:s})]},s)})}),b.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:["Selected: ",b.join(", ")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:a.description,onChange:m,rows:4,className:"input-security",placeholder:"Enter detailed description of the incident"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2",children:"Responsibility"}),e.jsxs("div",{className:"space-y-4",children:[n.map(s=>e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Unit/Department Involved"}),e.jsx("input",{type:"text",value:s.description,onChange:d=>B(s.id,"description",d.target.value),className:"input-security",placeholder:"Enter unit or department name"})]}),n.length>1&&e.jsx("button",{type:"button",onClick:()=>F(s.id),className:"text-red-500 hover:text-red-700 p-2 mt-6","aria-label":"Remove responsibility entry",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`type-${s.id}`,checked:s.type==="violation",onChange:()=>B(s.id,"type","violation"),className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Violation"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`type-${s.id}`,checked:s.type==="incident",onChange:()=>B(s.id,"type","incident"),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Incident"})]})]})]},s.id)),e.jsxs("button",{type:"button",onClick:_,className:"w-full flex items-center justify-center space-x-2 py-2 border-2 border-dashed border-slate-300 rounded-lg text-slate-600 hover:border-slate-400 hover:text-slate-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Add Responsibility Entry"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Action Taken"}),e.jsx("textarea",{name:"actionTaken",value:a.actionTaken,onChange:m,rows:3,className:"input-security",placeholder:"Action taken will be auto-generated based on CMD selection","aria-label":"Action taken",readOnly:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Response Date"}),e.jsx("input",{type:"date",name:"responseDate",value:a.responseDate,onChange:m,className:"input-security","aria-label":"Response Date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"LCRR"}),e.jsx("input",{type:"text",name:"lcrr",value:a.lcrr,onChange:m,className:"input-security",placeholder:"Enter LCRR"})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-6 pt-8 border-t border-slate-200",children:[e.jsxs("button",{type:"button",onClick:()=>V("low"),className:"btn-priority-low px-8 py-4 text-lg flex flex-col items-center space-y-2",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),e.jsx("span",{className:"font-bold",children:"Save as Low Priority"})]}),e.jsxs("button",{type:"button",onClick:()=>V("high"),className:"btn-priority-high px-8 py-4 text-lg flex flex-col items-center space-y-2",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"font-bold",children:"Save as High Priority"})]})]})]})]})})},ne=({incidents:l,onDeleteSelected:a,onUpdateIncident:o,onPrintIncident:n})=>{const[c,u]=p.useState("daily"),[b,f]=p.useState(""),[v,k]=p.useState("all"),[y,C]=p.useState(new Set),[g,D]=p.useState(null),[S,i]=p.useState(""),[j,m]=p.useState({}),x=p.useMemo(()=>{let t=l;return c==="low"?(t=l.filter(h=>(console.log("Checking incident for low table:",h.cmdOption),h.cmdOption==="cmd-fmd-call")),console.log("Filtered incidents for low table:",t.length)):t=l,b&&(t=t.filter(h=>h.crrNumber.toLowerCase().includes(b.toLowerCase())||h.subject.toLowerCase().includes(b.toLowerCase())||h.location.toLowerCase().includes(b.toLowerCase())||h.description.toLowerCase().includes(b.toLowerCase()))),v!=="all"&&(t=t.filter(h=>h.priority===v)),t},[l,c,b,v]);p.useEffect(()=>{const t={},h=[];return x.forEach(r=>{r.attachments&&r.attachments.forEach((M,I)=>{var T;if(((T=M.type)==null?void 0:T.startsWith("image/"))||/\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(M.name||"")){const O=`${r.id}-${I}`,$=URL.createObjectURL(M);t[O]=$,h.push($)}})}),m(t),()=>{h.forEach(r=>URL.revokeObjectURL(r))}},[x]);const N=p.useMemo(()=>x.length===0?!1:x.every(t=>y.has(t.id)),[x,y]),L=p.useMemo(()=>x.some(t=>y.has(t.id))&&!N,[x,y,N]),B=()=>{const t=new Set(y);N?x.forEach(h=>t.delete(h.id)):x.forEach(h=>t.add(h.id)),C(t)},_=t=>{const h=new Set(y);h.has(t)?h.delete(t):h.add(t),C(h)},F=()=>C(new Set),H=()=>{const t=l.filter(T=>y.has(T.id));if(t.length===0)return;const h=["id","reportNumber","crrNumber","dateTime","subject","category","location","description","responsibleDepartment","actionTaken","responseDate","lcrr","priority","cmdOption"],r=[h.join(","),...t.map(T=>h.map(O=>{const $=T[O];return'"'+(typeof $=="string"?$:String($??"")).replace(/"/g,'""')+'"'}).join(","))].join(`
`),M=new Blob([r],{type:"text/csv;charset=utf-8;"}),I=URL.createObjectURL(M),R=document.createElement("a");R.href=I,R.download=`incidents_export_${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.csv`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(I)},V=()=>{if(!a)return;const t=Array.from(y);t.length!==0&&(a(t),F())},s=(t,h,r)=>{D({id:t,key:h}),i(r??"")},d=()=>{D(null),i("")},w=t=>{if(!g||!o)return d();const{key:h}=g,r={...t,[h]:S};o(r),d()},A=[{key:"select",label:"",sortable:!1},{key:"reportNumber",label:"#",sortable:!0},{key:"crrNumber",label:"CRR Number",sortable:!0},{key:"dateTime",label:"Date & Time",sortable:!0},{key:"attachments",label:"Attachments",sortable:!1},{key:"subject",label:"Subject / Category",sortable:!0},{key:"location",label:"Location",sortable:!0},{key:"description",label:"Description",sortable:!0},{key:"responsibleDepartment",label:"Responsible Department",sortable:!0},{key:"actionTaken",label:"Action Taken",sortable:!0},{key:"responseDate",label:"Response Date",sortable:!0},{key:"responseEntity",label:"Response Entity",sortable:!0}],P=[{id:"daily",label:"Daily",color:"blue"},{id:"weekly",label:"Weekly",color:"green"},{id:"monthly",label:"Monthly",color:"purple"},{id:"yearly",label:"Yearly",color:"orange"},{id:"database",label:"Database",color:"indigo"},{id:"low",label:"Low Priority",color:"red"}],q=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return e.jsxs("div",{className:"space-y-6 px-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Security Reports Dashboard"}),e.jsx("p",{className:"text-slate-600",children:"Manage and view all security incidents"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search incidents...",value:b,onChange:t=>f(t.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:v,onChange:t=>k(t.target.value),"aria-label":"Filter by priority",className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"low",children:"Low Priority"})]})]})]}),e.jsx("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-lg",children:P.map(t=>{const h=c===t.id;return e.jsxs("button",{onClick:()=>u(t.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${h?`bg-white text-${t.color}-600 shadow-sm`:"text-slate-600 hover:text-slate-800 hover:bg-white/50"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"font-medium",children:t.label}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${h?`bg-${t.color}-100 text-${t.color}-600`:"bg-slate-200 text-slate-600"}`,children:x.length})]},t.id)})}),e.jsxs("div",{className:"card-security",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:A.map(t=>e.jsx("th",{className:"table-header",children:t.key==="select"?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox","aria-label":"Select all",checked:N,ref:h=>{h&&(h.indeterminate=L)},onChange:B})}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:t.label}),t.sortable&&e.jsx("div",{className:"flex flex-col",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]})},t.key))})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:A.length,className:"text-center py-12 text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"No incidents found"}),e.jsx("p",{className:"text-sm",children:b||v!=="all"?"Try adjusting your search or filter criteria":"Create your first incident report to get started"})]})]})})}):x.map((t,h)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox","aria-label":`Select row ${h+1}`,checked:y.has(t.id),onChange:()=>_(t.id)})})}),e.jsx("td",{className:"table-cell font-medium",children:t.reportNumber}),e.jsx("td",{className:"table-cell font-mono text-sm",onClick:()=>s(t.id,"crrNumber",t.crrNumber),children:(g==null?void 0:g.id)===t.id&&g.key==="crrNumber"?e.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit CRR Number",placeholder:"CRR Number",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&w(t),r.key==="Escape"&&d()}}):e.jsx("span",{children:t.crrNumber||"-"})}),e.jsx("td",{className:"table-cell text-sm",children:q(t.dateTime)}),e.jsx("td",{className:"table-cell",children:t.attachments&&t.attachments.length>0?e.jsxs("div",{className:"flex flex-wrap gap-2 items-start",children:[t.attachments.slice(0,3).map((r,M)=>{var T;const I=((T=r.type)==null?void 0:T.startsWith("image/"))||/\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(r.name||""),R=`${t.id}-${M}`;return I&&j[R]?e.jsx("img",{src:j[R],alt:r.name||"attachment image",className:"w-16 h-16 rounded border border-slate-200 object-cover cursor-pointer hover:opacity-90",onClick:()=>window.open(j[R],"_blank")},M):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200",onClick:()=>{const O=URL.createObjectURL(r);window.open(O,"_blank"),setTimeout(()=>URL.revokeObjectURL(O),0)},title:`Click to view: ${r.name||"attachment"}`,children:(r.name||"file").length>20?(r.name||"file").substring(0,20)+"...":r.name||"file"},M)}),t.attachments.length>3&&e.jsxs("span",{className:"text-xs text-slate-500",children:["+",t.attachments.length-3," more"]})]}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",onClick:()=>s(t.id,"subject",t.subject),children:(g==null?void 0:g.id)===t.id&&g.key==="subject"?e.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit Subject",placeholder:"Subject",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&w(t),r.key==="Escape"&&d()}}):e.jsx("span",{children:t.subject||"-"})}),e.jsx("div",{className:"text-sm text-slate-500",children:t.category||"-"})]})}),e.jsx("td",{className:"table-cell",onClick:()=>s(t.id,"location",t.location),children:(g==null?void 0:g.id)===t.id&&g.key==="location"?e.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit Location",placeholder:"Location",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&w(t),r.key==="Escape"&&d()}}):e.jsx("span",{children:t.location||"-"})}),e.jsx("td",{className:"table-cell align-top",onClick:()=>s(t.id,"description",t.description),children:(g==null?void 0:g.id)===t.id&&g.key==="description"?e.jsx("textarea",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit Description",placeholder:"Description",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&w(t),r.key==="Escape"&&d()}}):e.jsx("div",{className:"whitespace-pre-wrap break-words",title:t.description,children:t.description||"-"})}),e.jsx("td",{className:"table-cell align-top",onClick:()=>s(t.id,"responsibleDepartment",t.responsibleDepartment),children:(g==null?void 0:g.id)===t.id&&g.key==="responsibleDepartment"?e.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit Responsible Department",placeholder:"Responsible Department",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&w(t),r.key==="Escape"&&d()}}):e.jsx("span",{children:t.responsibleDepartment||"-"})}),e.jsx("td",{className:"table-cell align-top",onClick:()=>s(t.id,"actionTaken",t.actionTaken),children:(g==null?void 0:g.id)===t.id&&g.key==="actionTaken"?e.jsx("textarea",{autoFocus:!0,className:"w-full border border-slate-300 rounded px-2 py-1","aria-label":"Edit Action Taken",placeholder:"Action Taken",value:S,onChange:r=>i(r.target.value),onBlur:()=>w(t),onKeyDown:r=>{r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&w(t),r.key==="Escape"&&d()}}):e.jsx("div",{className:"whitespace-pre-wrap break-words",title:t.actionTaken,children:t.actionTaken||"-"})}),e.jsx("td",{className:"table-cell text-sm",children:q(t.responseDate)}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("select",{className:"px-2 py-1 border border-slate-300 rounded",value:t.priority,onChange:r=>o&&o({...t,priority:r.target.value}),"aria-label":"Change priority",children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{className:"px-2 py-1 border border-slate-300 rounded",value:t.cmdOption,onChange:r=>o&&o({...t,cmdOption:r.target.value}),"aria-label":"Change CMD option",children:[e.jsx("option",{value:"cmd",children:"CMD Only"}),e.jsx("option",{value:"cmd-fmd-call",children:"CMD & FMD & Call Centre"})]}),e.jsx("button",{className:"px-2 py-1 rounded border border-slate-300 text-slate-700 hover:bg-white",onClick:()=>n&&n(t),"aria-label":"Print incident",children:"Print"})]})})]},t.id))})]})}),y.size>0&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-50 border-t border-blue-200",children:[e.jsxs("div",{className:"text-sm text-slate-700",children:[y.size," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition",onClick:V,disabled:!a,title:a?"Delete selected":"Deletion not available",children:"Delete Selected"}),e.jsx("button",{className:"px-3 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition",onClick:H,children:"Export CSV"}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-white transition",onClick:F,children:"Clear"})]})]}),x.length>0&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-200",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",x.length," of ",l.length," incidents"]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["Last updated: ",new Date().toLocaleString()]})]})]})]})},W={bgFrom:"from-indigo-600",bgTo:"to-fuchsia-600",card:"bg-white",textSubtle:"text-slate-500"},U=({title:l,subtitle:a,children:o})=>e.jsxs("div",{className:`${W.card} rounded-xl shadow-sm border border-slate-200 p-5`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-slate-800 font-semibold",children:l}),a&&e.jsx("p",{className:`text-sm ${W.textSubtle}`,children:a})]}),o]});function K({value:l,total:a,color:o,label:n}){const u=2*Math.PI*48,b=a>0?l/Math.max(a,1):0,f=Math.max(0,Math.min(u,u*b));return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:48,stroke:"#e2e8f0",strokeWidth:"16",fill:"none"}),e.jsx("circle",{cx:"60",cy:"60",r:48,stroke:o,strokeWidth:"16",fill:"none",strokeDasharray:`${f} ${u-f}`,strokeLinecap:"round",transform:"rotate(-90 60 60)"}),e.jsx("text",{x:"60",y:"64",textAnchor:"middle",className:"fill-slate-800",fontSize:"18",fontWeight:700,children:a===0?"0%":`${Math.round(b*100)}%`})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-800 font-medium",children:n}),e.jsxs("div",{className:"text-sm text-slate-500",children:[l," of ",a]})]})]})}function Y({data:l}){const a=Math.max(1,...l.map(o=>o.value));return e.jsx("div",{className:"space-y-3",children:l.map(o=>e.jsxs("div",{className:"grid grid-cols-5 items-center gap-3",children:[e.jsx("div",{className:"col-span-1 text-sm text-slate-600 truncate",title:o.label,children:o.label}),e.jsx("div",{className:"col-span-4",children:e.jsx("div",{className:"h-3 rounded-full bg-slate-100 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full","data-width":`${o.value/a*100}%`,"data-color":o.color,style:{width:`${o.value/a*100}%`,backgroundColor:o.color}})})})]},o.label))})}function ce({points:l,color:a}){const c=Math.max(1,...l),u=l.length>1?260/(l.length-1):260,b=l.map((v,k)=>`${k===0?"M":"L"} ${k*u} ${80-v/c*80}`).join(" "),f=`M 0 80 ${b} L 260 80 Z`;return e.jsxs("svg",{width:260,height:80,className:"overflow-visible",children:[e.jsx("path",{d:f,fill:`${a}20`}),e.jsx("path",{d:b,stroke:a,strokeWidth:2,fill:"none"})]})}const de=({incidents:l})=>{const[a,o]=p.useState(""),[n,c]=p.useState(""),[u,b]=p.useState("all"),[f,v]=p.useState([]),k=p.useMemo(()=>{const i=new Set;return l.forEach(j=>{(j.responsibleDepartment||"").split(",").map(m=>m.trim()).filter(Boolean).forEach(m=>i.add(m))}),Array.from(i).sort()},[l]),y=p.useMemo(()=>l.filter(i=>{if(u!=="all"&&i.priority!==u)return!1;if(a){const j=new Date(i.dateTime||i.createdAt).getTime();if(isFinite(j)&&j<new Date(a).getTime())return!1}if(n){const j=new Date(i.dateTime||i.createdAt).getTime();if(isFinite(j)&&j>new Date(n+"T23:59:59").getTime())return!1}if(f.length){const j=(i.responsibleDepartment||"").split(",").map(m=>m.trim()).filter(Boolean);if(!f.some(m=>j.includes(m)))return!1}return!0}),[l,a,n,u,f]),C=p.useMemo(()=>({count:y.length,high:y.filter(i=>i.priority==="high").length,low:y.filter(i=>i.priority==="low").length}),[y]),g=p.useMemo(()=>{const i=new Map;y.forEach(x=>{(x.responsibleDepartment||"").split(",").map(L=>L.trim()).filter(Boolean).forEach(L=>i.set(L,(i.get(L)||0)+1))});const j=Array.from(i.entries()).sort((x,N)=>N[1]-x[1]).slice(0,8),m=["#6366f1","#22d3ee","#a78bfa","#34d399","#f472b6","#f59e0b","#60a5fa","#10b981"];return j.map(([x,N],L)=>({label:x,value:N,color:m[L%m.length]}))},[y]),D=p.useMemo(()=>{const i=new Map;y.forEach(x=>{const N=(x.category||x.subject||"").trim();N&&i.set(N,(i.get(N)||0)+1)});const j=Array.from(i.entries()).sort((x,N)=>N[1]-x[1]).slice(0,10),m=["#0ea5e9","#8b5cf6","#06b6d4","#22c55e","#f97316","#ef4444","#14b8a6","#a3e635","#eab308","#f43f5e"];return j.map(([x,N],L)=>({label:x,value:N,color:m[L%m.length]}))},[y]),S=p.useMemo(()=>{const i=new Map;y.forEach(m=>{if(!m.dateTime)return;const x=new Date(m.dateTime).toISOString().slice(0,10);i.set(x,(i.get(x)||0)+1)});const j=Array.from(i.entries()).sort((m,x)=>m[0].localeCompare(x[0]));return{labels:j.map(m=>m[0].slice(5)),points:j.map(m=>m[1])}},[y]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`rounded-xl p-6 bg-gradient-to-r ${W.bgFrom} ${W.bgTo} text-white shadow-md`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-white/80",children:"Insights from your security reports"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:C.count}),e.jsx("div",{className:"text-sm opacity-80",children:"Total Reports"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:C.high}),e.jsx("div",{className:"text-sm opacity-80",children:"High Priority"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:C.low}),e.jsx("div",{className:"text-sm opacity-80",children:"Low Priority"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/80 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:a,onChange:i=>o(i.target.value),className:"w-full rounded-md px-3 py-2 text-slate-900","aria-label":"Start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/80 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:n,onChange:i=>c(i.target.value),className:"w-full rounded-md px-3 py-2 text-slate-900","aria-label":"End date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/80 mb-1",children:"Priority"}),e.jsxs("select",{value:u,onChange:i=>b(i.target.value),className:"w-full rounded-md px-3 py-2 text-slate-900","aria-label":"Priority filter",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/80 mb-1",children:"Departments"}),e.jsxs("div",{className:"flex flex-wrap gap-2 bg-white rounded-md p-2",children:[k.length===0&&e.jsx("span",{className:"text-slate-500 text-sm",children:"No departments"}),k.map(i=>{const j=f.includes(i);return e.jsx("button",{type:"button",onClick:()=>v(m=>j?m.filter(x=>x!==i):[...m,i]),className:`px-2 py-1 rounded border text-sm ${j?"bg-indigo-600 text-white border-indigo-600":"border-slate-300 text-slate-700"}`,"aria-label":`Toggle ${i}`,children:i},i)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx(U,{title:"Priority Split",subtitle:"Share of high vs low",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx(K,{value:C.high,total:C.count,color:"#ef4444",label:"High"}),e.jsx(K,{value:C.low,total:C.count,color:"#10b981",label:"Low"})]})}),e.jsx(U,{title:"Top Departments",subtitle:"Most assigned departments",children:e.jsx(Y,{data:g})}),e.jsx(U,{title:"Reports by Day",subtitle:"Activity over time",children:S.points.length>0?e.jsx("div",{className:"flex items-end justify-between",children:e.jsx(ce,{points:S.points,color:"#06b6d4"})}):e.jsx("div",{className:"text-sm text-slate-500",children:"No dated reports yet"})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(U,{title:"Top Categories",subtitle:"Most frequent subjects/categories",children:e.jsx(Y,{data:D})}),e.jsx(U,{title:"Category Share",subtitle:"Distribution of top categories",children:D.length>0?e.jsx("div",{className:"flex flex-wrap gap-6",children:D.slice(0,4).map(i=>e.jsx(K,{value:i.value,total:D.reduce((j,m)=>j+m.value,0),color:i.color,label:i.label},i.label))}):e.jsx("div",{className:"text-sm text-slate-500",children:"No category data yet"})})]})]})},E=({label:l,value:a})=>e.jsxs("div",{className:"grid grid-cols-3 border border-slate-400 text-xs",children:[e.jsx("div",{className:"col-span-1 bg-slate-100 px-2 py-1 font-semibold text-slate-700",children:l}),e.jsx("div",{className:"col-span-2 px-2 py-1 text-slate-800",children:a||"-"})]}),me=({incident:l,onBack:a})=>{const o=p.useMemo(()=>(l.responsibleDepartment||"").split(",").map(n=>n.trim()).filter(Boolean),[l]);return e.jsxs("div",{className:"print-bg",children:[e.jsxs("div",{className:"no-print flex justify-between items-center mb-4",children:[e.jsx("button",{className:"px-3 py-2 rounded border border-slate-300 text-slate-700",onClick:a,children:"Back"}),e.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>window.print(),children:"Print"})]}),e.jsxs("section",{className:"sheet",children:[e.jsxs("header",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"your Company Name"}),e.jsx("div",{className:"text-lg font-semibold text-slate-700",children:"Security Security"}),e.jsx("div",{className:"text-lg font-bold text-slate-800",children:"Security"})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 text-center rounded-sm mb-2 font-semibold",children:"Incident Summary (INSUM)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-0 border border-slate-400",children:[e.jsx(E,{label:"Ref No.",value:l.reportNumber}),e.jsx(E,{label:"Time",value:new Date(l.dateTime||l.createdAt).toLocaleTimeString()}),e.jsx(E,{label:"Date",value:new Date(l.dateTime||l.createdAt).toLocaleDateString()}),e.jsx(E,{label:"Incident Specific Location",value:l.location}),e.jsx(E,{label:"Incident Category",value:l.category}),e.jsx(E,{label:"Subject",value:l.subject})]}),e.jsxs("div",{className:"mt-1 border border-slate-400",children:[e.jsx("div",{className:"bg-slate-100 text-slate-700 text-xs font-semibold px-2 py-1 border-b border-slate-400 text-center",children:"Incident Details"}),e.jsx("div",{className:"px-2 py-1 text-xs whitespace-pre-wrap min-h-[400px]",children:l.description||"-"})]}),e.jsxs("div",{className:"mt-1 border border-slate-400",children:[e.jsx("div",{className:"bg-slate-100 text-slate-700 text-xs font-semibold px-2 py-1 border-b border-slate-400 text-center",children:"Action Taken"}),e.jsx("div",{className:"px-2 py-1 text-xs whitespace-pre-wrap min-h-[250px]",children:l.actionTaken||"-"})]}),e.jsx("div",{className:"mt-2 border border-slate-400",children:e.jsxs("div",{className:"grid grid-cols-2 gap-0 text-xs",children:[e.jsx(E,{label:"Response Date",value:l.responseDate?new Date(l.responseDate).toLocaleDateString():"-"}),e.jsx(E,{label:"Priority",value:l.priority.toUpperCase()}),e.jsx(E,{label:"Departments",value:o.join(" â€¢ ")||"-"}),e.jsx(E,{label:"CRR Number",value:l.crrNumber||"-"})]})}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-0 border border-slate-400",children:[e.jsxs("div",{className:"border-r border-slate-400",children:[e.jsx("div",{className:"bg-slate-100 text-slate-700 text-xs font-semibold px-2 py-1 border-b border-slate-400",children:"Security Supervisor your Company Name"}),e.jsxs("div",{className:"px-2 py-1 text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Enter name"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Designation:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-16",placeholder:"Supervisor"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID. No.:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Enter ID"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature & Date:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Sign & date"})]})]})]}),e.jsxs("div",{className:"border-r border-slate-400",children:[e.jsx("div",{className:"bg-slate-100 text-slate-700 text-xs font-semibold px-2 py-1 border-b border-slate-400",children:"Admin FORCES Security"}),e.jsxs("div",{className:"px-2 py-1 text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Enter name"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Designation:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-16",placeholder:"Admin Coordinator"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID. No.:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Enter ID"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature & Date:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Sign & date"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-slate-100 text-slate-700 text-xs font-semibold px-2 py-1 border-b border-slate-400",children:"Report Submitted to your Company Name Security Group-MISR"}),e.jsxs("div",{className:"px-2 py-1 text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Received By:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Enter name"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Designation:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-16",placeholder:"Security Coordinator"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"your Company Name Entity:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-16",placeholder:"Security"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature & Date:"})," ",e.jsx("input",{type:"text",className:"border-none bg-transparent text-xs w-20",placeholder:"Sign & date"})]})]})]})]}),e.jsxs("footer",{className:"mt-3 text-center",children:[e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"CONFIDENTIAL"}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:"NOTE: Be diligent. As applicable, if you view or download a copy of any document [policy/process/form] and you print it out, you should write your name on the front cover [for document control purposes]. If you receive a hard copy of any document [policy/process/form], please, write your name on the front cover [for document control purposes]."})]})]}),e.jsxs("section",{className:"sheet page-break",children:[e.jsxs("header",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"your Company Name"}),e.jsx("div",{className:"text-lg font-semibold text-slate-700",children:"Security Security"}),e.jsx("div",{className:"text-lg font-bold text-slate-800",children:"Security"})]}),e.jsx("div",{className:"bg-slate-200 text-slate-800 py-2 text-center rounded-sm mb-2 font-semibold border border-slate-400",children:"Attachments"}),e.jsx("div",{className:"min-h-[500px] border border-slate-400 rounded-sm p-1 grid grid-cols-4 gap-1",children:(l.attachments||[]).map((n,c)=>{var u;return e.jsx("div",{className:"border border-slate-300 rounded-sm p-1 text-center text-[10px]",children:(u=n.type)!=null&&u.startsWith("image/")?e.jsx("img",{className:"w-full h-32 object-cover",src:URL.createObjectURL(n),alt:n.name||"attachment",onLoad:b=>URL.revokeObjectURL(b.target.src)}):e.jsx("span",{children:n.name||"File"})},c)})}),e.jsxs("footer",{className:"mt-3 text-center",children:[e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"CONFIDENTIAL"}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:"Page 2"})]})]})]})};function xe(){const[l,a]=p.useState([]),[o,n]=p.useState("form"),[c,u]=p.useState(null),b=f=>{console.log("Submitted incident:",f),console.log("CMD Option:",f.cmdOption),console.log("Priority:",f.priority),a(v=>[...v,f]),n("tables")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Security Daily Reports"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Security Incident Management System"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>n("form"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${o==="form"?"bg-white/20 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:"New Report"}),e.jsx("button",{onClick:()=>n("tables"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${o==="tables"?"bg-white/20 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:"View Reports"}),e.jsx("button",{onClick:()=>n("analytics"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${o==="analytics"?"bg-white/20 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:"Analytics"})]})]})})}),e.jsxs("main",{className:"w-full max-w-none mx-auto px-2 sm:px-4 py-8",children:[o==="form"&&e.jsx(oe,{onSubmit:b}),o==="tables"&&e.jsx(ne,{incidents:l,onDeleteSelected:f=>{a(v=>v.filter(k=>!f.includes(k.id)))},onUpdateIncident:f=>{a(v=>v.map(k=>k.id===f.id?f:k))},onPrintIncident:f=>{u(f),n("print")}}),o==="analytics"&&e.jsx(de,{incidents:l}),o==="print"&&c&&e.jsx(me,{incident:c,onBack:()=>n("tables")})]}),e.jsx("footer",{className:"bg-slate-800 text-white py-6 mt-12",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("p",{className:"text-sm text-slate-300",children:"Â© 2026 Security Security Department. Developed by Ahmed Hussein, Security Coordinator."}),e.jsx("p",{className:"mt-2 text-lg text-slate-200 font-semibold tracking-wide",children:"Made with â¤ï¸"})]})})]})}G.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(xe,{})}));
